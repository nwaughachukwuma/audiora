runtime: nodejs20

entrypoint: node build/index.js

inbound_services:
  - warmup

handlers:
  - url: /(.*?/)__data\.json
    secure: always
    script: auto
  - url: /_app/immutable
    static_dir: build/client/_app/immutable
    expiration: 365d
    http_headers:
      Cache-Control: immutable
  - url: /_app
    static_dir: build/client/_app
    expiration: 0s
    http_headers:
      Cache-Control: no-store
  - url: /(.*\.(ico|png|svg|json))
    static_files: build/client/\1
    upload: build/client/(.*\.(ico|png|svg|json))
    expiration: 10m
  - url: /.*
    secure: always
    script: auto

env_variables:
  NODE_ENV: production
  BUCKET_NAME: 'gs://veedo-29931.appspot.com'
  CLOUD_STORAGE_BUCKET: 'gs://veedo-29931.appspot.com'
  BODY_SIZE_LIMIT: Infinity
